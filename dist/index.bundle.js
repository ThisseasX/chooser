var chooser=function(){"use strict";var n=/^\{(?:\$(\d+?))?(?:#(.+?))?\}$/,e=function(e){return _.isPlainObject(e)?function(e){return Object.entries(e).map((function(e){var t=e[0],i=e[1],r=n.exec(i)||[],u={when:t,ref:r[1],use:r[2],then:i};return _.pickBy(_.negate(_.isUndefined),u)}),[])}(e):e},t=function(n){var t=n.input,i=n.choices,r=n.equalityFn;return _.flow((function(n){return _.set("choices",function(n){return _.isFunction(n)?n():n}(n.choices),n)}),(function(n){return _.set("input",function(n,e){return _.isPlainObject(n)?_.toString(e):e}(n.choices,n.input),n)}),(function(n){return _.set("choices",e(n.choices),n)}),(function(n){return _.set("equalityFn",function(n){return n&&_.curryN(2,n)}(r),n)}),_.values)({input:t,choices:i,equalityFn:r})},i=function(n,e,t,r){return void 0===t&&(t=_.eq),_.flow(_.isUndefined(r)?_.find((function(e){var i=e.when;return _.isArray(i)?i.some(t(n)):t(n)(i)})):_.constant(e[r]),_.defaultTo({}),(function(r){return _.isUndefined(r.ref)?_.isUndefined(r.use)?r:i(r.use,e,t):i(n,e,t,r.ref)}))(e)};return function(n,e,r){return function(u,c){return _.flow(_.spread(i),(function(n){return _.isUndefined(n.eager)?_.result("then",n):n.eager}),_.defaultTo(e))(t({input:u,choices:n,equalityFn:c||r}))}}}();
