import{flow as n,spread as e,cond as t,has as r,get as u,stubTrue as i,result as c,defaultTo as o,set as f,isFunction as h,isPlainObject as a,isUndefined as s,toString as p,entries as v,map as w,curryN as l,values as q,constant as y,negate as F,nth as d,find as g,isArray as m,some as x,partialRight as $,__ as b,identity as j,pickBy as k,eq as z}from"lodash/fp";var A=/^\{(?:\$(\d+?))?(?:#(.+?))?\}$/;function B(n){return F(s)(n)}var C=function(e){var t=e[0],r=e[1];return n((function(n){return[{when:n.when,then:n.then},A.exec(r)||[]]}),(function(n){var e=n[0],t=e.when,r=e.then,u=n[1];return{when:t,then:r,ref:u[1],use:u[2]}}),k(B))({when:t,then:r})},D=function(e){return a(e)?function(e){return n(v,w(C))(e)}(e):e},E=function(e){var t=e.input,r=e.choices,u=e.equalityFn;return n((function(n){return f("choices",function(n){return h(n)?n():n}(n.choices),n)}),(function(n){return f("input",function(n,e,t){return a(n)&&s(t)?p(e):e}(n.choices,n.input,u),n)}),(function(n){return f("choices",D(n.choices),n)}),(function(n){return f("equalityFn",function(n){return n&&l(2,n)}(u),n)}),q)({input:t,choices:r,equalityFn:u})},G=function(e,r){return function(c){return n(u("when"),t([[m,x(r(e))],[i,r(e)]]))(c)}},H=function(e,c,f,h){return void 0===f&&(f=z),n(t([[y(B(h)),d(h)],[i,g(G(e,f))]]),o({}),t([[r("ref"),n(u("ref"),$(H,[e,c,f,b]))],[r("use"),n(u("use"),$(H,[b,c,f]))],[i,j]]))(c)},I=function(f,h,a){return function(s,p){return n(E,e(H),t([[r("eager"),u("eager")],[i,c("then")]]),o(h))({input:s,choices:f,equalityFn:p||a})}};export{I as chooser};
//# sourceMappingURL=index.es.js.map
